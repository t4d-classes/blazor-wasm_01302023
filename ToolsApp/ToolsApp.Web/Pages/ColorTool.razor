@page "/color-tool"

@using ToolsApp.Core.Interfaces.Data
@using ToolsApp.Components.ColorTool

@inject IColorsData colorsData


<ToolHeader HeaderText="Color Tool"></ToolHeader>

<ColorList Colors="@_colors" OnDeleteColor="@deleteColor"></ColorList>

<ColorForm ButtonText="Add Color" OnSubmitColor="@addColor"></ColorForm>



@code {
  private IEnumerable<IColor> _colors { get; set; } = new List<IColor>();

  protected override async Task OnInitializedAsync()
  {
    _colors = await colorsData.All();
  }

  private async Task addColor(INewColor newColor)
  {
    await colorsData.Append(newColor);
    _colors = await colorsData.All();
  }

  private async Task deleteColor(int colorId)
  {
    await colorsData.Remove(colorId);
    _colors = await colorsData.All();
  }
}
